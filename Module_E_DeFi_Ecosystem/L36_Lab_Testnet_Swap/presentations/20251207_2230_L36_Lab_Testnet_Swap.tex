\documentclass[8pt,aspectratio=169]{beamer}
\usetheme{Madrid}
\usepackage[utf8]{inputenc}
\usepackage{graphicx}
\usepackage{booktabs}
\usepackage{hyperref}
\usepackage{amsmath}

\title{L36: Lab - Testnet Swap}
\subtitle{Module E: DeFi Ecosystem}
\author{Blockchain \& Cryptocurrency}
\date{December 2025}

\begin{document}

\frame{\titlepage}

\begin{frame}{Lab Objectives}
\textbf{In this lab, you will:}
\begin{itemize}
\item Set up a testnet wallet (MetaMask)
\item Acquire testnet ETH from faucet
\item Execute a token swap on Uniswap testnet
\item Calculate and observe slippage
\item Provide liquidity to a pool
\item Track impermanent loss over time
\item Document your experience and findings
\end{itemize}

\vspace{0.3cm}
\textbf{Network:} Sepolia Testnet (Ethereum)

\vspace{0.3cm}
\textbf{Time:} 90 minutes
\end{frame}

\begin{frame}{Prerequisites}
\textbf{Before Starting:}
\begin{enumerate}
\item Web browser (Chrome, Firefox, or Brave recommended)
\item No real money required (testnet only)
\item Pen and paper for calculations
\end{enumerate}

\vspace{0.3cm}
\textbf{Safety Reminders:}
\begin{itemize}
\item This is testnet - funds have NO real value
\item NEVER share your seed phrase (even for testnet)
\item Do NOT send real ETH to testnet address
\item Keep testnet and mainnet wallets separate
\end{itemize}
\end{frame}

\begin{frame}{Step 1: Install MetaMask}
\textbf{Actions:}
\begin{enumerate}
\item Go to \url{https://metamask.io}
\item Click ``Download'' and add to your browser
\item Create new wallet (or import if you have testnet wallet)
\item Write down seed phrase (keep safe even for testnet)
\item Set a password
\end{enumerate}

\vspace{0.3cm}
\textbf{Network Setup:}
\begin{itemize}
\item Click network dropdown (top right)
\item Enable ``Show test networks'' in settings
\item Select ``Sepolia Test Network''
\end{itemize}

\vspace{0.3cm}
\textbf{Verify:} You should see ``Sepolia'' in network selector and 0 ETH balance.
\end{frame}

\begin{frame}{Step 2: Acquire Testnet ETH}
\textbf{Sepolia Faucets (pick one):}
\begin{itemize}
\item \url{https://sepoliafaucet.com}
\item \url{https://faucet.quicknode.com/ethereum/sepolia}
\item Alchemy faucet: \url{https://sepoliafaucet.alchemy.com}
\end{itemize}

\vspace{0.3cm}
\textbf{Process:}
\begin{enumerate}
\item Copy your Sepolia address from MetaMask
\item Paste into faucet website
\item Complete captcha or sign in (varies by faucet)
\item Request testnet ETH (usually 0.5-1 ETH per request)
\item Wait 1-2 minutes for transaction to confirm
\end{enumerate}

\vspace{0.3cm}
\textbf{Verification:} Check MetaMask balance shows testnet ETH.

\vspace{0.3cm}
\textbf{Note:} If faucet fails, try alternative or ask instructor for testnet ETH.
\end{frame}

\begin{frame}{Step 3: Access Uniswap Testnet}
\textbf{URL:} \url{https://app.uniswap.org}

\vspace{0.3cm}
\textbf{Actions:}
\begin{enumerate}
\item Connect wallet (click ``Connect Wallet'' button)
\item Select MetaMask
\item Approve connection request
\item Verify you're on Sepolia network (check top right)
\end{enumerate}

\vspace{0.3cm}
\textbf{Interface Overview:}
\begin{itemize}
\item \textbf{Swap:} Exchange tokens
\item \textbf{Pool:} Provide/remove liquidity
\item \textbf{Settings:} Slippage tolerance, deadline
\end{itemize}

\vspace{0.3cm}
\textbf{Troubleshooting:}
\begin{itemize}
\item If network wrong: Switch to Sepolia in MetaMask
\item If connection fails: Refresh page and reconnect
\end{itemize}
\end{frame}

\begin{frame}{Step 4: Execute Your First Swap}
\textbf{Goal:} Swap 0.1 ETH for USDC (or available testnet token).

\vspace{0.3cm}
\textbf{Process:}
\begin{enumerate}
\item Click ``Swap'' tab
\item Select ETH in ``From'' field
\item Enter amount: 0.1 ETH
\item Select USDC (or DAI) in ``To'' field
\item Note the exchange rate and expected output
\item Click ``Swap''
\item Review transaction details in MetaMask
\item Click ``Confirm'' in MetaMask
\item Wait for transaction confirmation (30-60 seconds)
\end{enumerate}

\vspace{0.3cm}
\textbf{Record:}
\begin{itemize}
\item Amount sent: \_\_\_\_ ETH
\item Amount received: \_\_\_\_ USDC
\item Exchange rate: \_\_\_\_ USDC per ETH
\item Gas fee: \_\_\_\_ ETH
\end{itemize}
\end{frame}

\begin{frame}{Step 5: Analyze Slippage}
\textbf{Before executing second swap, calculate expected slippage.}

\vspace{0.3cm}
\textbf{Experiment:}
\begin{enumerate}
\item Try swapping small amount (0.01 ETH) - note price
\item Try swapping medium amount (0.1 ETH) - note price
\item Try swapping large amount (1 ETH) - note price
\item \textbf{Do NOT execute}, just observe quote
\end{enumerate}

\vspace{0.3cm}
\textbf{Questions:}
\begin{itemize}
\item How does price change with swap size?
\item What is the percentage difference between small and large swap?
\item Why does slippage increase non-linearly?
\end{itemize}

\vspace{0.3cm}
\textbf{Slippage Tolerance:}
\begin{itemize}
\item Click settings icon (gear)
\item Try different tolerance: 0.1\%, 0.5\%, 1\%
\item What happens if you set it too low?
\end{itemize}
\end{frame}

\begin{frame}{Step 6: Provide Liquidity}
\textbf{Goal:} Become a liquidity provider (LP).

\vspace{0.3cm}
\textbf{Process:}
\begin{enumerate}
\item Click ``Pool'' tab
\item Click ``+ New Position'' (V3) or ``Create a pair'' (V2)
\item Select token pair (e.g., ETH/USDC)
\item Choose fee tier (0.05\%, 0.3\%, or 1\%)
\item \textbf{For V3:} Set price range (try full range for simplicity)
\item Enter amounts (e.g., 0.05 ETH + equivalent USDC)
\item Click ``Preview''
\item Approve USDC spending (if first time)
\item Confirm liquidity provision
\item Wait for transaction confirmation
\end{enumerate}

\vspace{0.3cm}
\textbf{Record:}
\begin{itemize}
\item ETH deposited: \_\_\_\_
\item USDC deposited: \_\_\_\_
\item Fee tier: \_\_\_\_
\item Price range (V3): \_\_\_\_
\end{itemize}
\end{frame}

\begin{frame}{Step 7: Monitor Your Position}
\textbf{After providing liquidity:}

\vspace{0.3cm}
\textbf{Check:}
\begin{itemize}
\item Pool share percentage
\item Current liquidity value (in USD)
\item Fees earned (if any trades occurred)
\item Price range status (V3: in range or out of range?)
\end{itemize}

\vspace{0.3cm}
\textbf{Simulate Price Change:}
\begin{itemize}
\item Execute a large swap in one direction (buy ETH with USDC)
\item Observe how your position changes
\item Check if fees accrued
\item Note any change in token ratio
\end{itemize}

\vspace{0.3cm}
\textbf{Impermanent Loss Tracking:}
\begin{itemize}
\item Initial deposit value: \_\_\_\_ USD
\item Current position value: \_\_\_\_ USD
\item If you had just held tokens: \_\_\_\_ USD
\item Impermanent loss: \_\_\_\_\%
\end{itemize}
\end{frame}

\begin{frame}{Step 8: Remove Liquidity}
\textbf{Goal:} Withdraw your liquidity and observe final outcome.

\vspace{0.3cm}
\textbf{Process:}
\begin{enumerate}
\item Go to ``Pool'' tab
\item Click on your position
\item Click ``Remove Liquidity''
\item Select percentage to remove (try 100\%)
\item Click ``Remove''
\item Confirm transaction in MetaMask
\item Wait for confirmation
\end{enumerate}

\vspace{0.3cm}
\textbf{Record Final Amounts:}
\begin{itemize}
\item ETH received: \_\_\_\_
\item USDC received: \_\_\_\_
\item Total fees earned: \_\_\_\_
\item Compare to initial deposit
\end{itemize}

\vspace{0.3cm}
\textbf{Calculate Net Result:}
\[
\text{Profit/Loss} = \text{(Final Value + Fees)} - \text{Initial Value} - \text{Gas Costs}
\]
\end{frame}

\begin{frame}{Step 9: Explore Advanced Features}
\textbf{Optional Experiments:}

\vspace{0.3cm}
\textbf{1. Multi-Hop Swaps}
\begin{itemize}
\item Try swapping between two tokens without direct pair
\item Observe how Uniswap routes through multiple pools
\item Compare fees and slippage to direct swaps
\end{itemize}

\textbf{2. V2 vs. V3 Comparison}
\begin{itemize}
\item Provide liquidity in V2 (full range, simpler)
\item Provide liquidity in V3 (concentrated, complex)
\item Compare fee earnings and management complexity
\end{itemize}

\textbf{3. Price Impact Analysis}
\begin{itemize}
\item For different pool sizes, test same swap amount
\item Observe how liquidity depth affects slippage
\end{itemize}
\end{frame}

\begin{frame}{Step 10: Document Your Findings}
\textbf{Lab Report Structure:}

\vspace{0.3cm}
\begin{enumerate}
\item \textbf{Introduction} (1 paragraph)
\begin{itemize}
\item Overview of activities performed
\end{itemize}

\item \textbf{Swap Analysis} (1 page)
\begin{itemize}
\item Trade details (amounts, rates, gas fees)
\item Slippage observations
\item Screenshots of transactions
\end{itemize}

\item \textbf{Liquidity Provision} (1 page)
\begin{itemize}
\item LP position details
\item Fee earnings (if any)
\item Impermanent loss calculation
\end{itemize}

\item \textbf{Reflections} (1/2 page)
\begin{itemize}
\item Challenges encountered
\item UX observations (ease of use, clarity)
\item Comparison to centralized exchanges
\end{itemize}
\end{enumerate}
\end{frame}

\begin{frame}{Impermanent Loss Calculation Example}
\textbf{Scenario:}
\begin{itemize}
\item Initial deposit: 0.05 ETH + 100 USDC (ETH = \$2,000)
\item ETH price changes to \$2,500
\end{itemize}

\vspace{0.3cm}
\textbf{If you just held:}
\begin{itemize}
\item 0.05 ETH now worth: $0.05 \times \$2{,}500 = \$125$
\item 100 USDC still worth: \$100
\item \textbf{Total: \$225}
\end{itemize}

\textbf{If you provided liquidity:}
\begin{itemize}
\item Pool rebalances (constant product formula)
\item New ratio: ~0.0447 ETH + 111.8 USDC
\item Value: $(0.0447 \times \$2{,}500) + \$111.8 = \$223.55$
\item \textbf{Impermanent Loss: \$225 - \$223.55 = \$1.45 (0.64\%)}
\end{itemize}

\vspace{0.3cm}
\textbf{Add fees earned:} If you earned \$3 in fees, net profit = \$3 - \$1.45 = \$1.55.
\end{frame}

\begin{frame}{Common Issues and Solutions}
\textbf{Problem: Transaction Fails}
\begin{itemize}
\item \textbf{Solution:} Increase slippage tolerance or reduce swap amount
\end{itemize}

\textbf{Problem: Insufficient Liquidity}
\begin{itemize}
\item \textbf{Solution:} Use more popular pairs (ETH/USDC, ETH/DAI)
\end{itemize}

\textbf{Problem: High Gas Fees (even on testnet)}
\begin{itemize}
\item \textbf{Solution:} Wait for lower network congestion or use L2 testnet
\end{itemize}

\textbf{Problem: Can't Find Token}
\begin{itemize}
\item \textbf{Solution:} Import token contract address manually
\end{itemize}

\textbf{Problem: Out of Testnet ETH}
\begin{itemize}
\item \textbf{Solution:} Use multiple faucets or ask instructor
\end{itemize}
\end{frame}

\begin{frame}{Reflection Questions}
\textbf{Answer in your lab report:}

\vspace{0.3cm}
\begin{enumerate}
\item How does the Uniswap UX compare to centralized exchanges (Coinbase, Binance)?
\item What are the main advantages of AMMs from a user perspective?
\item What are the main risks or disadvantages you observed?
\item Would you consider providing liquidity on mainnet with real funds? Why or why not?
\item How could the interface be improved for better user experience?
\item What surprised you most about the DeFi experience?
\end{enumerate}
\end{frame}

\begin{frame}{Submission Requirements}
\textbf{Your lab report should include:}

\vspace{0.3cm}
\begin{enumerate}
\item Cover page with name and date
\item Transaction hashes (Etherscan links)
\item Screenshots of key steps (wallet, swaps, liquidity provision)
\item Completed data tables (amounts, rates, fees)
\item Impermanent loss calculation (with formula)
\item Reflection answers (1-2 paragraphs per question)
\item Total: 3-4 pages
\end{enumerate}

\vspace{0.3cm}
\textbf{Format:} PDF

\textbf{Deadline:} [Instructor to specify]
\end{frame}

\begin{frame}{Summary}
\textbf{Key Takeaways:}
\begin{itemize}
\item Testnets allow risk-free DeFi experimentation
\item Slippage increases with trade size relative to pool liquidity
\item Providing liquidity earns fees but exposes to impermanent loss
\item V3 concentrated liquidity offers higher returns but requires active management
\item DEX UX has improved significantly but still more complex than CEX
\item Understanding mechanics is crucial before risking real capital
\end{itemize}

\vspace{0.3cm}
\textbf{Next Lecture:} Lending Protocols - How Aave and Compound enable borrowing and lending.
\end{frame}

\end{document}
